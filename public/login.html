<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Login Rusun</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-950 flex items-center justify-center min-h-screen text-white">

<div class="bg-slate-900 p-8 rounded-xl w-[360px] shadow-lg">
  <h2 class="text-xl font-bold mb-4 text-center">üîê Login Sistem Rusun</h2>

  <input id="username" placeholder="Username" class="w-full p-2 mb-3 bg-slate-800 rounded">
  <input id="password" type="password" placeholder="Password" class="w-full p-2 mb-4 bg-slate-800 rounded">

  <button onclick="doLogin()" class="w-full bg-blue-600 hover:bg-blue-700 py-2 rounded font-semibold">
    MASUK
  </button>

  <p id="msg" class="text-red-400 text-sm mt-3 text-center hidden">Login gagal</p>
</div>

<script>
async function doLogin(){
  const user = username.value.trim();
  const pass = password.value.trim();
  if(!user || !pass) return;

  try{
    const res = await fetch("/api/login",{
      method:"POST",
      headers:{
        "Content-Type":"application/json",
        "X-Requested-With":"XMLHttpRequest"
      },
      body:JSON.stringify({username:user,password:pass})
    });

    const json = await res.json();

    if(json.status){
      // ‚úÖ SESSION BROWSER
      sessionStorage.setItem("RUSUN_LOGIN","OK");
      sessionStorage.setItem("RUSUN_USER",user);
      location.href="/internal.html";
    }else{
      msg.classList.remove("hidden");
    }
  }catch(e){
    alert("Server error");
  }
}
</script>

</body>
</html>
